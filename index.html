<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuxServe - Luxury Service Finder</title>
    <!-- Telegram Mini App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#E2E1FF',
                        luxury: {
                            gold: '#D4AF37',
                            silver: '#C0C0C0',
                            black: '#121212',
                        }
                    },
                }
            }
        }
    </script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
        
        /* Animations */
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Dark mode transitions */
        * {
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100">
    <div id="app" class="max-w-md mx-auto min-h-screen pb-24 relative">
        <!-- Header -->
        <header class="sticky top-0 z-30 bg-white dark:bg-gray-900 shadow-sm dark:shadow-gray-800 p-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <span class="text-primary text-2xl font-bold">LuxServe</span>
                    <span class="bg-luxury-gold text-white text-xs px-2 py-0.5 rounded">PREMIUM</span>
                </div>
                <div class="flex space-x-3">
                    <button id="filter-btn" class="p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-primary">
                        <i class="fas fa-sliders-h"></i>
                    </button>
                    <button id="location-btn" class="p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-primary">
                        <i class="fas fa-location-dot"></i>
                    </button>
                </div>
            </div>
            
            <!-- Search bar -->
            <div class="mt-4 relative">
                <input type="text" id="search-input" placeholder="Search luxury services..." 
                       class="w-full p-3 pl-10 rounded-lg bg-gray-100 dark:bg-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-primary">
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
        </header>

        <!-- Categories Horizontal Scroll -->
        <div class="overflow-x-auto py-4 px-4 whitespace-nowrap">
            <div class="flex space-x-3">
                <button class="category-btn active px-4 py-2 rounded-full bg-primary text-white text-sm font-medium">
                    All
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-sm font-medium">
                    Spa & Wellness
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-sm font-medium">
                    Personal Stylist
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-sm font-medium">
                    Chef Services
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-sm font-medium">
                    Home Services
                </button>
                <button class="category-btn px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-sm font-medium">
                    Transportation
                </button>
            </div>
        </div>
        
        <!-- Filter Panel (Hidden by default) -->
        <div id="filter-panel" class="hidden fixed inset-0 z-40 bg-black bg-opacity-50">
            <div class="absolute bottom-0 w-full bg-white dark:bg-gray-900 rounded-t-xl p-4 animate-fade-in">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">Filters</h3>
                    <button id="close-filter" class="p-2">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <!-- Price Range -->
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Price Range</h4>
                    <div class="flex items-center space-x-2">
                        <input type="range" min="0" max="1000" value="1000" class="w-full accent-primary" id="price-range">
                        <span id="price-display">$0-$1000</span>
                    </div>
                </div>
                
                <!-- Rating Filter -->
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Minimum Rating</h4>
                    <div class="flex space-x-2">
                        <button class="rating-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700">
                            3+ <i class="fas fa-star text-yellow-400 text-xs"></i>
                        </button>
                        <button class="rating-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700">
                            4+ <i class="fas fa-star text-yellow-400 text-xs"></i>
                        </button>
                        <button class="rating-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700">
                            4.5+ <i class="fas fa-star text-yellow-400 text-xs"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Badges Filter -->
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Badges</h4>
                    <div class="flex flex-wrap gap-2">
                        <button class="badge-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700 text-sm">
                            Premium
                        </button>
                        <button class="badge-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700 text-sm">
                            Verified
                        </button>
                        <button class="badge-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700 text-sm">
                            Top Rated
                        </button>
                        <button class="badge-btn px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700 text-sm">
                            Exclusive
                        </button>
                    </div>
                </div>
                
                <!-- Apply Filters Button -->
                <button id="apply-filters" class="w-full py-3 bg-primary text-white rounded-lg font-medium">
                    Apply Filters
                </button>
            </div>
        </div>
        
        <!-- Service Detail Modal (Hidden by default) -->
        <div id="service-modal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50">
            <div class="absolute bottom-0 w-full bg-white dark:bg-gray-900 rounded-t-xl max-h-[90vh] overflow-y-auto animate-fade-in">
                <div id="service-detail-content">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Location Modal (Hidden by default) -->
        <div id="location-modal" class="hidden fixed inset-0 z-40 bg-black bg-opacity-50">
            <div class="absolute bottom-0 w-full bg-white dark:bg-gray-900 rounded-t-xl p-4 animate-fade-in">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">Set Location</h3>
                    <button id="close-location" class="p-2">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="mb-4">
                    <button id="current-location" class="w-full py-3 flex justify-center items-center bg-primary text-white rounded-lg font-medium">
                        <i class="fas fa-location-crosshairs mr-2"></i> Use Current Location
                    </button>
                </div>
                
                <div class="mb-4">
                    <input type="text" placeholder="Enter address or area" 
                           class="w-full p-3 rounded-lg bg-gray-100 dark:bg-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Recent Locations</h4>
                    <div class="space-y-2">
                        <div class="flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded">
                            <i class="fas fa-history text-gray-400 mr-2"></i>
                            <span>Downtown, New York</span>
                        </div>
                        <div class="flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded">
                            <i class="fas fa-history text-gray-400 mr-2"></i>
                            <span>Upper East Side, New York</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Booking Success Modal (Hidden by default) -->
        <div id="booking-success-modal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center">
            <div class="bg-white dark:bg-gray-900 rounded-xl p-6 max-w-xs w-full text-center animate-fade-in">
                <div class="flex justify-center mb-4">
                    <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center">
                        <i class="fas fa-check text-2xl text-green-500"></i>
                    </div>
                </div>
                <h3 class="text-xl font-bold mb-2">Booking Confirmed!</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Your reservation has been successfully confirmed. You'll receive a notification with details.</p>
                <button id="close-success" class="w-full py-3 bg-primary text-white rounded-lg font-medium">
                    Done
                </button>
            </div>
        </div>

        <!-- Share Success Modal -->
        <div id="share-success-modal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center">
            <div class="bg-white dark:bg-gray-900 rounded-xl p-6 max-w-xs w-full text-center animate-fade-in">
                <div class="flex justify-center mb-4">
                    <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center">
                        <i class="fas fa-share-alt text-2xl text-blue-500"></i>
                    </div>
                </div>
                <h3 class="text-xl font-bold mb-2">Shared Successfully!</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Your selected service has been shared to Telegram.</p>
                <button id="close-share-success" class="w-full py-3 bg-primary text-white rounded-lg font-medium">
                    Done
                </button>
            </div>
        </div>

        <!-- Main Service List -->
        <div id="service-list" class="px-4 pb-20">
            <!-- Services will be populated by JavaScript -->
            <div id="service-loading" class="py-10 text-center">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"></div>
                <p class="mt-2 text-gray-600 dark:text-gray-400">Loading luxury services...</p>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 shadow-lg dark:shadow-gray-800 z-20">
            <div class="max-w-md mx-auto px-4 py-2">
                <div class="flex justify-between items-center">
                    <button class="nav-btn flex flex-col items-center p-2 text-primary">
                        <i class="fas fa-home text-lg"></i>
                        <span class="text-xs mt-1">Home</span>
                    </button>
                    <button class="nav-btn flex flex-col items-center p-2 text-gray-500 dark:text-gray-400">
                        <i class="fas fa-compass text-lg"></i>
                        <span class="text-xs mt-1">Explore</span>
                    </button>
                    <button class="nav-btn flex flex-col items-center p-2 text-gray-500 dark:text-gray-400">
                        <i class="fas fa-calendar-alt text-lg"></i>
                        <span class="text-xs mt-1">Bookings</span>
                    </button>
                    <button class="nav-btn flex flex-col items-center p-2 text-gray-500 dark:text-gray-400">
                        <i class="fas fa-user text-lg"></i>
                        <span class="text-xs mt-1">Profile</span>
                    </button>
                </div>
            </div>
        </nav>
    </div>

    <script>
        // Dark mode detection and setup
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Telegram Web App initialization
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.enableClosingConfirmation();
            
            // Set theme based on Telegram theme
            if (tg.colorScheme === 'dark') {
                document.documentElement.classList.add('dark');
            }
        }

        // Function to generate colored blocks for mock images
        function generateColorBlock(color, text) {
            const canvas = document.createElement('canvas');
            canvas.width = 300;
            canvas.height = 200;
            const ctx = canvas.getContext('2d');
            
            // Fill background
            ctx.fillStyle = color;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add text
            ctx.fillStyle = '#333333';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, canvas.width/2, canvas.height/2);
            
            return canvas.toDataURL();
        }

        // Mock data for services
        const services = [
            {
                id: 1,
                name: "Royal Spa & Massage",
                category: "Spa & Wellness",
                images: [
                    generateColorBlock("#E6D7B9", "Luxury Spa"),
                    generateColorBlock("#B9C9E6", "Massage Room"),
                    generateColorBlock("#E6B9D7", "Wellness Area")
                ],
                description: "Experience ultimate relaxation with our premium spa treatments designed for discerning clients. Our therapists are trained in exclusive techniques from around the world.",
                rating: 4.9,
                reviews: 128,
                price: "$150 - $400",
                badges: ["Premium", "Top Rated"],
                location: "Downtown",
                distance: "0.8 miles",
                features: ["Swedish Massage", "Hot Stone Therapy", "Aromatherapy", "Couples Massage"],
                availability: ["10:00 AM", "12:30 PM", "3:00 PM", "5:30 PM"]
            },
            {
                id: 2,
                name: "Elite Personal Styling",
                category: "Personal Stylist",
                images: [
                    generateColorBlock("#CFD8DC", "Fashion Styling"),
                    generateColorBlock("#DCEDC8", "Wardrobe Selection"),
                    generateColorBlock("#FFE0B2", "Personal Shopper")
                ],
                description: "Transform your image with our elite personal styling services. Our fashion experts will curate a personalized wardrobe that reflects your unique style and status.",
                rating: 4.7,
                reviews: 85,
                price: "$200 - $750",
                badges: ["Exclusive", "Verified"],
                location: "Fashion District",
                distance: "1.2 miles",
                features: ["Style Consultation", "Wardrobe Audit", "Personal Shopping", "Event Styling"],
                availability: ["9:00 AM", "11:30 AM", "2:00 PM", "4:30 PM"]
            },
            {
                id: 3,
                name: "Gourmet Chef At Home",
                category: "Chef Services",
                images: [
                    generateColorBlock("#BBDEFB", "Chef Service"),
                    generateColorBlock("#F8BBD0", "Gourmet Cuisine"),
                    generateColorBlock("#C8E6C9", "Fine Dining")
                ],
                description: "Enjoy restaurant-quality dining in the comfort of your home. Our Michelin-trained chefs will create a bespoke culinary experience tailored to your preferences.",
                rating: 4.8,
                reviews: 104,
                price: "$300 - $1000",
                badges: ["Premium", "Top Rated", "Exclusive"],
                location: "Citywide",
                distance: "Service at your location",
                features: ["Personalized Menu", "Wine Pairing", "Dietary Accommodations", "Special Occasions"],
                availability: ["6:00 PM", "7:00 PM", "8:00 PM", "9:00 PM"]
            },
            {
                id: 4,
                name: "Premium Home Cleaning",
                category: "Home Services",
                images: [
                    generateColorBlock("#D1C4E9", "Home Cleaning"),
                    generateColorBlock("#B3E5FC", "Premium Service"),
                    generateColorBlock("#FFCCBC", "Housekeeping")
                ],
                description: "Our premium cleaning service uses eco-friendly products and hospital-grade disinfection techniques to ensure your home is immaculately clean and healthy.",
                rating: 4.6,
                reviews: 156,
                price: "$100 - $350",
                badges: ["Verified", "Top Rated"],
                location: "Citywide",
                distance: "Service at your location",
                features: ["Deep Cleaning", "Window Washing", "Carpet Cleaning", "Organization Services"],
                availability: ["9:00 AM", "11:00 AM", "1:00 PM", "3:00 PM"]
            },
            {
                id: 5,
                name: "Luxury Car Service",
                category: "Transportation",
                images: [
                    generateColorBlock("#E1BEE7", "Luxury Cars"),
                    generateColorBlock("#B2DFDB", "Chauffeur Service"),
                    generateColorBlock("#FFECB3", "Premium Transportation")
                ],
                description: "Travel in style with our fleet of luxury vehicles. Whether it's airport transfers or city tours, our professional chauffeurs provide a seamless experience.",
                rating: 4.8,
                reviews: 92,
                price: "$80 - $250/hour",
                badges: ["Premium", "Verified"],
                location: "Citywide",
                distance: "On-demand service",
                features: ["Airport Transfers", "City Tours", "Event Transportation", "Hourly Chauffeur"],
                availability: ["24/7 Service"]
            },
            {
                id: 6,
                name: "Elite Personal Training",
                category: "Spa & Wellness",
                images: [
                    generateColorBlock("#BCAAA4", "Personal Training"),
                    generateColorBlock("#B2EBF2", "Fitness Premium"),
                    generateColorBlock("#DCEDC8", "Elite Workout")
                ],
                description: "Achieve your fitness goals with our elite personal trainers. Customized workout programs, nutrition planning, and motivation to help you reach your peak condition.",
                rating: 4.7,
                reviews: 78,
                price: "$120 - $200/session",
                badges: ["Premium", "Verified"],
                location: "Multiple Locations",
                distance: "1.5 miles",
                features: ["1-on-1 Training", "Nutrition Planning", "Progress Tracking", "Recovery Techniques"],
                availability: ["6:00 AM", "8:00 AM", "5:00 PM", "7:00 PM"]
            }
        ];

        // Render service cards
        function renderServices(serviceList = services) {
            const serviceListEl = document.getElementById('service-list');
            serviceListEl.innerHTML = '';
            
            serviceList.forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'bg-white dark:bg-gray-800 rounded-xl shadow-sm dark:shadow-gray-700 mb-4 overflow-hidden';
                serviceCard.setAttribute('data-service-id', service.id);
                
                const badgesHTML = service.badges.map(badge => 
                    `<span class="bg-secondary dark:bg-gray-700 text-primary text-xs px-2 py-0.5 rounded mr-2">${badge}</span>`
                ).join('');
                
                serviceCard.innerHTML = `
                    <div class="relative">
                        <img src="${service.images[0]}" alt="${service.name}" class="w-full h-48 object-cover">
                        <div class="absolute bottom-0 left-0 w-full p-3 bg-gradient-to-t from-black to-transparent">
                            <div class="flex items-center text-white">
                                <span class="font-bold">${service.rating}</span>
                                <div class="ml-1">
                                    ${generateStars(service.rating)}
                                </div>
                                <span class="ml-1 text-sm">(${service.reviews})</span>
                            </div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-bold">${service.name}</h3>
                            <button class="favorite-btn p-1 text-gray-400 hover:text-red-500">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        <div class="flex items-center mb-2">
                            <i class="fas fa-map-marker-alt text-primary mr-1"></i>
                            <span class="text-sm text-gray-600 dark:text-gray-400">${service.location} · ${service.distance}</span>
                        </div>
                        <div class="mb-2">
                            ${badgesHTML}
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2">${service.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="font-semibold text-primary">${service.price}</span>
                            <button class="book-now-btn px-4 py-2 bg-primary text-white rounded-lg text-sm">
                                Book Now
                            </button>
                        </div>
                    </div>
                `;
                
                serviceListEl.appendChild(serviceCard);
                
                // Add event listeners to the card
                serviceCard.addEventListener('click', (e) => {
                    // Don't open service details if clicking on favorite or book now button
                    if (!e.target.closest('.favorite-btn') && !e.target.closest('.book-now-btn')) {
                        openServiceDetails(service.id);
                    }
                });
                
                // Add event listener to favorite button
                const favoriteBtn = serviceCard.querySelector('.favorite-btn');
                favoriteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFavorite(favoriteBtn);
                });
                
                // Add event listener to book now button
                const bookNowBtn = serviceCard.querySelector('.book-now-btn');
                bookNowBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    openServiceDetails(service.id, true);
                });
            });
        }

        // Generate star rating HTML
        function generateStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star text-yellow-400 text-xs"></i>';
            }
            
            if (halfStar) {
                stars += '<i class="fas fa-star-half-alt text-yellow-400 text-xs"></i>';
                
                for (let i = 0; i < 5 - fullStars - 1; i++) {
                    stars += '<i class="far fa-star text-yellow-400 text-xs"></i>';
                }
            } else {
                for (let i = 0; i < 5 - fullStars; i++) {
                    stars += '<i class="far fa-star text-yellow-400 text-xs"></i>';
                }
            }
            
            return stars;
        }

        // Toggle favorite
        function toggleFavorite(btn) {
            if (btn.innerHTML.includes('far')) {
                btn.innerHTML = '<i class="fas fa-heart text-red-500"></i>';
                showToast('Added to favorites');
            } else {
                btn.innerHTML = '<i class="far fa-heart"></i>';
                showToast('Removed from favorites');
            }
        }

        // Open service details
        function openServiceDetails(serviceId, scrollToBooking = false) {
            const service = services.find(s => s.id === serviceId);
            if (!service) return;
            
            const modal = document.getElementById('service-modal');
            const contentEl = document.getElementById('service-detail-content');
            
            const imagesHTML = service.images.map((img, index) => 
                `<div class="carousel-item ${index === 0 ? 'active' : ''}" data-index="${index}">
                    <img src="${img}" alt="" class="w-full h-64 object-cover">
                </div>`
            ).join('');
            
            const featuresHTML = service.features.map(feature => 
                `<div class="flex items-center mb-2">
                    <i class="fas fa-check text-primary mr-2"></i>
                    <span>${feature}</span>
                </div>`
            ).join('');
            
            const availabilityHTML = service.availability.map(time => 
                `<button class="time-slot px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-center hover:border-primary">
                    ${time}
                </button>`
            ).join('');
            
            const badgesHTML = service.badges.map(badge => 
                `<span class="bg-secondary dark:bg-gray-700 text-primary text-xs px-2 py-0.5 rounded mr-2">${badge}</span>`
            ).join('');
            
            contentEl.innerHTML = `
                <div class="relative">
                    <div class="carousel relative">
                        <div class="carousel-inner">
                            ${imagesHTML}
                        </div>
                        <button class="carousel-control-prev absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="carousel-control-next absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <div class="carousel-indicators absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-2">
                            ${service.images.map((_, index) => 
                                `<button class="carousel-indicator w-2 h-2 rounded-full bg-white ${index === 0 ? 'opacity-100' : 'opacity-50'}" data-index="${index}"></button>`
                            ).join('')}
                        </div>
                    </div>
                    <button id="close-service-modal" class="absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h2 class="text-xl font-bold">${service.name}</h2>
                        <button class="favorite-detail-btn p-1 text-gray-400 hover:text-red-500">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center mb-2">
                        <span class="font-bold mr-1">${service.rating}</span>
                        <div class="ml-1">
                            ${generateStars(service.rating)}
                        </div>
                        <span class="ml-1 text-sm">(${service.reviews} reviews)</span>
                    </div>
                    
                    <div class="flex items-center mb-2">
                        <i class="fas fa-map-marker-alt text-primary mr-1"></i>
                        <span class="text-sm text-gray-600 dark:text-gray-400">${service.location} · ${service.distance}</span>
                    </div>
                    
                    <div class="mb-3">
                        ${badgesHTML}
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="font-bold mb-2">About</h3>
                        <p class="text-gray-600 dark:text-gray-400">${service.description}</p>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="font-bold mb-2">Services Offered</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                            ${featuresHTML}
                        </div>
                    </div>
                    
                    <div id="booking-section" class="mb-6">
                        <h3 class="font-bold mb-2">Book an Appointment</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-2">Select a time slot:</p>
                        <div class="grid grid-cols-2 gap-2 mb-4">
                            ${availabilityHTML}
                        </div>
                        <button id="confirm-booking" class="w-full py-3 bg-primary text-white rounded-lg font-medium">
                            Confirm Booking
                        </button>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="font-bold mb-2">Reviews</h3>
                        <div class="mb-4">
                            <div class="flex items-center mb-2">
                                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center mr-3">
                                    <i class="fas fa-user text-gray-500"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium">John D.</h4>
                                    <div class="flex items-center">
                                        <div class="mr-1">
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                        </div>
                                        <span class="text-xs text-gray-500">2 days ago</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Exceptional service! The attention to detail and personalization exceeded my expectations. Will definitely book again.
                            </p>
                        </div>
                        
                        <div class="mb-4">
                            <div class="flex items-center mb-2">
                                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center mr-3">
                                    <i class="fas fa-user text-gray-500"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium">Sarah M.</h4>
                                    <div class="flex items-center">
                                        <div class="mr-1">
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                                            <i class="far fa-star text-yellow-400 text-xs"></i>
                                        </div>
                                        <span class="text-xs text-gray-500">1 week ago</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 text-sm">
                                Very professional and high-quality service. The only issue was a slight delay, but the experience made up for it.
                            </p>
                        </div>
                        
                        <button class="text-primary font-medium">
                            View all ${service.reviews} reviews
                        </button>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button id="share-service" class="flex-1 py-3 border border-primary text-primary rounded-lg font-medium">
                            <i class="fas fa-share-alt mr-1"></i> Share
                        </button>
                        <button id="report-service" class="flex-1 py-3 border border-gray-300 dark:border-gray-700 text-gray-600 dark:text-gray-300 rounded-lg font-medium">
                            <i class="fas fa-flag mr-1"></i> Report
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            
            // Set up carousel functionality
            const carouselItems = contentEl.querySelectorAll('.carousel-item');
            const carouselIndicators = contentEl.querySelectorAll('.carousel-indicator');
            const prevButton = contentEl.querySelector('.carousel-control-prev');
            const nextButton = contentEl.querySelector('.carousel-control-next');
            
            let currentIndex = 0;
            
            function showSlide(index) {
                carouselItems.forEach(item => item.classList.remove('active'));
                carouselIndicators.forEach(indicator => indicator.classList.remove('opacity-100'));
                carouselIndicators.forEach(indicator => indicator.classList.add('opacity-50'));
                
                carouselItems[index].classList.add('active');
                carouselIndicators[index].classList.remove('opacity-50');
                carouselIndicators[index].classList.add('opacity-100');
                currentIndex = index;
            }
            
            prevButton.addEventListener('click', () => {
                const newIndex = currentIndex === 0 ? carouselItems.length - 1 : currentIndex - 1;
                showSlide(newIndex);
            });
            
            nextButton.addEventListener('click', () => {
                const newIndex = currentIndex === carouselItems.length - 1 ? 0 : currentIndex + 1;
                showSlide(newIndex);
            });
            
            carouselIndicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    showSlide(index);
                });
            });
            
            // Set up event listeners for the modal
            document.getElementById('close-service-modal').addEventListener('click', () => {
                modal.classList.add('hidden');
            });
            
            // Scroll to booking section if needed
            if (scrollToBooking) {
                setTimeout(() => {
                    document.getElementById('booking-section').scrollIntoView({ behavior: 'smooth' });
                }, 300);
            }
            
            // Set up time slot selection
            const timeSlots = contentEl.querySelectorAll('.time-slot');
            timeSlots.forEach(slot => {
                slot.addEventListener('click', () => {
                    timeSlots.forEach(s => s.classList.remove('border-primary', 'text-primary'));
                    slot.classList.add('border-primary', 'text-primary');
                });
            });
            
            // Set up confirm booking
            document.getElementById('confirm-booking').addEventListener('click', () => {
                showBookingSuccess();
                modal.classList.add('hidden');
            });
            
            // Set up favorite button
            const favoriteBtn = contentEl.querySelector('.favorite-detail-btn');
            favoriteBtn.addEventListener('click', () => {
                toggleFavorite(favoriteBtn);
            });
            
            // Set up share service button
            document.getElementById('share-service').addEventListener('click', () => {
                shareService(service);
            });
        }

        // Show booking success modal
        function showBookingSuccess() {
            const modal = document.getElementById('booking-success-modal');
            modal.classList.remove('hidden');
            
            document.getElementById('close-success').addEventListener('click', () => {
                modal.classList.add('hidden');
            });
        }

        // Share service
        function shareService(service) {
            if (tg && tg.showPopup) {
                tg.showPopup({
                    title: 'Share via',
                    message: 'Choose where to share this service',
                    buttons: [
                        {id: 'telegram', type: 'default', text: 'Share to Telegram'},
                        {id: 'cancel', type: 'cancel', text: 'Cancel'}
                    ]
                }, (buttonId) => {
                    if (buttonId === 'telegram') {
                        // In a real app, this would share to Telegram
                        const shareModal = document.getElementById('share-success-modal');
                        shareModal.classList.remove('hidden');
                        
                        document.getElementById('close-share-success').addEventListener('click', () => {
                            shareModal.classList.add('hidden');
                        });
                    }
                });
            } else {
                // Fallback for when Telegram SDK is not available
                const shareModal = document.getElementById('share-success-modal');
                shareModal.classList.remove('hidden');
                
                document.getElementById('close-share-success').addEventListener('click', () => {
                    shareModal.classList.add('hidden');
                });
            }
        }

        // Show toast message
        function showToast(message) {
            const toastId = 'toast-' + Date.now();
            const toast = document.createElement('div');
            toast.id = toastId;
            toast.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg z-50 animate-fade-in';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Filter panel functionality
        document.getElementById('filter-btn').addEventListener('click', () => {
            document.getElementById('filter-panel').classList.remove('hidden');
        });
        
        document.getElementById('close-filter').addEventListener('click', () => {
            document.getElementById('filter-panel').classList.add('hidden');
        });
        
        // Price range functionality
        const priceRange = document.getElementById('price-range');
        const priceDisplay = document.getElementById('price-display');
        
        priceRange.addEventListener('input', () => {
            priceDisplay.textContent = `$0-$${priceRange.value}`;
        });
        
        // Badge & rating filter selection
        const badgeBtns = document.querySelectorAll('.badge-btn');
        badgeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                btn.classList.toggle('bg-primary');
                btn.classList.toggle('text-white');
                btn.classList.toggle('border-primary');
            });
        });
        
        const ratingBtns = document.querySelectorAll('.rating-btn');
        ratingBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                ratingBtns.forEach(b => {
                    b.classList.remove('bg-primary', 'text-white', 'border-primary');
                });
                btn.classList.add('bg-primary', 'text-white', 'border-primary');
            });
        });
        
        // Apply filters button
        document.getElementById('apply-filters').addEventListener('click', () => {
            // In a real app, this would filter the results
            document.getElementById('filter-panel').classList.add('hidden');
            document.getElementById('service-list').innerHTML = `
                <div id="service-loading" class="py-10 text-center">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"></div>
                    <p class="mt-2 text-gray-600 dark:text-gray-400">Filtering services...</p>
                </div>
            `;
            
            // Simulate filtering delay
            setTimeout(() => {
                renderServices();
                showToast('Filters applied successfully!');
            }, 800);
        });
        
        // Location modal functionality
        document.getElementById('location-btn').addEventListener('click', () => {
            document.getElementById('location-modal').classList.remove('hidden');
        });
        
        document.getElementById('close-location').addEventListener('click', () => {
            document.getElementById('location-modal').classList.add('hidden');
        });
        
        document.getElementById('current-location').addEventListener('click', () => {
            document.getElementById('location-modal').classList.add('hidden');
            document.getElementById('service-list').innerHTML = `
                <div id="service-loading" class="py-10 text-center">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"></div>
                    <p class="mt-2 text-gray-600 dark:text-gray-400">Finding services near you...</p>
                </div>
            `;
            
            // Simulate location update delay
            setTimeout(() => {
                renderServices();
                showToast('Location updated to current location');
            }, 1200);
        });
        
        // Category buttons functionality
        const categoryBtns = document.querySelectorAll('.category-btn');
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons
                categoryBtns.forEach(b => b.classList.remove('active', 'bg-primary', 'text-white'));
                categoryBtns.forEach(b => b.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-gray-600', 'dark:text-gray-300'));
                
                // Add active class to clicked button
                btn.classList.add('active', 'bg-primary', 'text-white');
                btn.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-gray-600', 'dark:text-gray-300');
                
                // Show loading state
                document.getElementById('service-list').innerHTML = `
                    <div id="service-loading" class="py-10 text-center">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"></div>
                        <p class="mt-2 text-gray-600 dark:text-gray-400">Loading ${btn.textContent.trim() === 'All' ? 'services' : btn.textContent.trim() + ' services'}...</p>
                    </div>
                `;
                
                // Filter services based on category with a slight delay to show the loading state
                setTimeout(() => {
                    const category = btn.textContent.trim();
                    let filteredServices;
                    
                    if (category === 'All') {
                        filteredServices = services;
                    } else {
                        filteredServices = services.filter(service => service.category === category);
                    }
                    
                    renderServices(filteredServices);
                }, 800);
            });
        });
        
        // Initialize the service list with a loading state
        setTimeout(() => {
            renderServices();
        }, 1000);
    </script>
</body>
</html>